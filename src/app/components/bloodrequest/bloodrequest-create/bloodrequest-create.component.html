

<form class="form-container" [formGroup]="requestForm" (submit)="insert()">
  <div class="f">
    <h2 class="mat-display-2">Create Blood Request</h2>
  </div>

  <mat-form-field class="f-w">
    <mat-label>Patient Name</mat-label>
    <input matInput formControlName="patientName" required>
    <mat-error *ngIf="f.patientName.touched && f.patientName.errors?.required">Patient name is required!</mat-error>
    <mat-error *ngIf="f.patientName.touched && f.patientName.errors?.maxlength">Patient name can be maximum 50 char!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Blood Group</mat-label>
    <mat-select formControlName="bloodGroupID">
      <mat-option value="">None</mat-option>
      <mat-option *ngFor="let b of bloodGroups" [value]="b.bloodGroupID">
        {{b.groupName}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.bloodGroupID.touched && f.bloodGroupID.errors">Blood Group is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Reason For Blood</mat-label>
    <input matInput formControlName="reasonForBlood" required>
    <mat-error *ngIf="f.reasonForBlood.touched && f.reasonForBlood.errors?.required">Reason for blood is required!</mat-error>
    <mat-error *ngIf="f.reasonForBlood.touched && f.reasonForBlood.errors?.maxlength">Reason for blood can be maximum 200 char!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Quantity</mat-label>
    <input matInput type="number" formControlName="quantity" required>
    <mat-error *ngIf="f.quantity.touched && f.quantity.errors?.required">Quantity is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Location Name</mat-label>
    <mat-select formControlName="locationID">
      <mat-option value="">None</mat-option>
      <mat-option *ngFor="let l of locations" [value]="l.locationID">
        {{l.locationName}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.locationID.touched && f.locationID.errors">Location is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Hospital Name</mat-label>
    <mat-select formControlName="hospitalID">
      <mat-option value="">None</mat-option>
      <mat-option *ngFor="let h of hospitals" [value]="h.hospitalID">
        {{h.hospitalName}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.hospitalID.touched && f.hospitalID.errors">Hospital is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Contact No</mat-label>
    <input matInput formControlName="contactNo" required>
    <mat-error *ngIf="f.contactNo.touched && f.contactNo.errors?.required">Contact No is required!</mat-error>
  </mat-form-field>
  <div class="mat-form-field f-w">
    <mat-label style="margin-right:16px">Status</mat-label>
    <mat-radio-group formControlName="status" aria-label="Select an option">
      <mat-radio-button value="Pending">Pending</mat-radio-button>
      <mat-radio-button value="Accepted">Accepted</mat-radio-button>
      <!--<mat-radio-button value="Rejected">Rejected</mat-radio-button>-->
    </mat-radio-group>
    <mat-error *ngIf="f.status.touched && f.status.errors">Status is required!</mat-error>
  </div>
  <mat-form-field class="f-w">
    <mat-label>Donation Date</mat-label>
    <input matInput formControlName="donationDate" required [matDatepicker]="picker" type="text">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
    <mat-error *ngIf="f.donationDate.touched && f.donationDate.errors?.required">Donation Date is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Created At</mat-label>
    <input matInput formControlName="createdAt" required [matDatepicker]="picker2" type="text">
    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
    <mat-datepicker #picker2></mat-datepicker>
    <mat-error *ngIf="f.createdAt.touched && f.createdAt.errors?.required">Created Date is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Requester Name</mat-label>
    <mat-select formControlName="requesterProfileId">
      <mat-option value="">None</mat-option>
      <mat-option *ngFor="let r of profiles" [value]="r.profileID">
        {{r.firstName}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.requesterProfileId.touched && f.requesterProfileId.errors">Requester name is required!</mat-error>
  </mat-form-field>
  <mat-form-field class="f-w">
    <mat-label>Donor Name</mat-label>
    <mat-select formControlName="donorProfileId">
      <mat-option value="">None</mat-option>
      <mat-option *ngFor="let d of profiles" [value]="d.profileID">
        {{d.firstName}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="f.donorProfileId.touched && f.donorProfileId.errors">Donor name is required!</mat-error>
  </mat-form-field>

  <div class="f-w">
    <button [disabled]="requestForm.invalid" mat-raised-button type="submit" color="primary"><mat-icon>save_alt</mat-icon> Save</button>
  </div>
  <div class="f-w">
    <a mat-raised-button color="primary" [routerLink]="['/request']"><mat-icon>arrow_left_alt</mat-icon> Back to List</a>
  </div>
</form>
